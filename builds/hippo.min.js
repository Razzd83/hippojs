/*hippo - v0.1 - 2012-10-11
* http://hippojs.com
* Copyright (c) 2012 Cody Lindley; Licensed MIT */
(function(){var e=this,t=e.document,n=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,r=function(e,t){return new i(e,t)},i=function(e,n){var r;n&&n.nodeType?n.nodeType===1?r=n.ownerDocument:r=n.body.ownerDocument:r=t;if(!e)return this.length=1,this[0]=document.documentElement,this;if(typeof e=="string"&&e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){var i=r.createElement("div");i.className="hippo-doc-frag-wrapper";var s=r.createDocumentFragment();s.appendChild(i);var o=s.querySelector("div");o.innerHTML=e;var u=o.children.length;for(var a=0;a<u;a++)this[a]=o.children[a];return this.length=u,this}if(typeof e=="object"&&e.nodeName)return this.length=1,this[0]=e,this;var f;typeof e!="string"?f=e:typeof n=="string"&&r.querySelectorAll(n)[0]===undefined?f=[]:f=(typeof n=="string"?r.querySelectorAll(n)[0]:r).querySelectorAll(e);for(var l=0;l<f.length;l++)this[l]=f[l];return this.length=f.length,this};e.hippo=r,"$"in e||(e.$=r),r.fn=i.prototype={constructor:r},r.version="0.1",r.each=function(e,t){var n,r=0,i=e.length;if(i===undefined){for(n in e)if(t.call(e[n],n,e[n])===!1)break}else for(;r<i;)if(t.call(e[r],r,e[r++])===!1)break;return e},r.type=function(e){if(e===null)return"null";if(e===undefined)return"undefined";var t=Object.prototype.toString.call(e).match(/^\[object\s+(.*?)\]$/)[1];return t=t?t.toLowerCase():"",t=="number"&&isNaN(e)?"NaN":t},r.isArray=Array.isArray||function(e){return r.type(e)==="array"},r.isFunction=function(e){return r.type(e)==="function"},r.matchesSelector=function(e,n){var r=t.body;return(t.matchesSelector||r.mozMatchesSelector||r.webkitMatchesSelector||r.oMatchesSelector||r.msMatchesSelector).call(e,n)},r.collectElements=function(e,t,n){var i=[];while(e=e[t])if(e.nodeType===Node.ELEMENT_NODE){i.push(e);if(n&&r.matchesSelector(e,n))return i}return i},r.uniqElements=function(e){var t,n,r=1,i=function(e,n){return e===n?(t=!0,0):(!e.compareDocumentPosition||!n.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(n)&4)?-1:1};e.sort(i);for(;n=e[r];r++)n===e[r-1]&&e.splice(r--,1);return e},r.camelCaseDashs=function(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return(t+"").toUpperCase()})},r.fn.is=function(e){var t=!0;return this.each(function(n,i){if(e.nodeValue){if(i===e){t=!1;return}}else if(!r.matchesSelector(i,e)){t=!1;return}}),t},r.fn.isEmpty=function(){var e=!0;return this.each(function(t,n){if(this.innerHTML.trim()!==""){e=!1;return}}),e},r.fn.index=function(e){var t=-1;return this.each(function(n,i){if(typeof e=="string"){if(r.matchesSelector(i,e))return t=n,!1}else if(this===e)return t=n,!1}),t},r.fn.lastIndex=function(e){var t=this.reverse().index(e);return t===-1?-1:this.length-1-t},r.fn.siblingIndex=function(){if(this[0]===undefined)return-1;var e=0,t=this[0];while(t&&(t=t.previousElementSibling))e++;return e},r.fn.has=function(e){var t=!1;return this.each(function(n,r){if(typeof e=="string"?this.parentNode.querySelectorAll(e).length===1:this.parentNode.contains(e))return t=!0,!1}),t},r.fn.total=function(){return this.length},r.fn.toArray=function(){return[].slice.call(this)},r.fn.get=function(e){return e===undefined?this[0]:this[e]},r.fn.reverse=function(){return r(this.toArray().reverse())},r.fn.each=function(e){return r.each(this,e)},r.fn.slice=function(e,t){return r(this.toArray().slice(e,t))},r.fn.at=function(e){return r(this.get(e))},r.fn.find=function(e){return results=[],this.each(function(){var t=this.querySelectorAll(e);t.length&&r.each(t,function(e,t){results.push(t)})}),r(this.length===1?results:r.uniqElements(results))},r.fn.findExclude=function(e){return results=[],this.each(function(){var t=this.querySelectorAll("*:not("+e+")");t.length&&r.each(t,function(e,t){results.push(t)})}),r(this.length===1?results:r.uniqElements(results))},r.fn.not=function(e){var t=[];return this.each(function(n,i){r.matchesSelector(i,e)||t.push(i)}),r(t)},r.fn.filter=function(e){var t=[];return r.isFunction(e)?(this.each(function(n,r){e.call(r)&&t.push(r)}),r(t)):typeof e=="string"?(this.each(function(n,i){r.matchesSelector(i,e)&&t.push(i)}),r(t)):this},r.fn.add=function(e,t){var n=[].slice.call(this);return n[t?"unshift":"push"](r(e)[0]),r(n)},r.fn.last=function(){return r(this[this.length-1])},r.fn.first=function(){return r(this[0])},r.fn.clone=function(e){var t=[];return this.each(function(n,r){t.push(r.cloneNode(e?e:!1))}),r(t)},r.fn.replaceWith=function(e){return e?this.each(function(){n.exec(e)!==null?this.outerHTML=e:typeof e=="string"&&t.querySelectorAll(e).length===0?this.outerHTML=e:typeof e=="string"?this.outerHTML=r(e)[0].outerHTML:e.nodeName?this.outerHTML=e.outerHTML:this.outerHTML=e[0].outerHTML}):this},r.fn.empty=function(){return this.each(function(){this.innerHTML=""})},r.fn.remove=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},r.fn.before=function(e){return this.each(function(){if(n.exec(e)!==null)this.insertAdjacentHTML("beforebegin",e);else if(typeof e=="string")this.insertAdjacentHTML("beforebegin",r(e)[0].outerHTML);else if(e.nodeName)this.insertAdjacentHTML("beforebegin",e.outerHTML);else{var t=this;e.each(function(e,n){t.insertAdjacentHTML("beforebegin",n.outerHTML)})}})},r.fn.insertBefore=function(e){return this[0].parentNode.className==="hippo-doc-frag-wrapper"&&n.exec(e)!==null?r(this[0]).add(e,!0):this.each(function(){r(e).before(this)})},r.fn.after=function(e){return this.each(function(){if(n.exec(e)!==null)this.insertAdjacentHTML("afterend",e);else if(typeof e=="string")this.insertAdjacentHTML("afterend",r(e)[0].outerHTML);else if(e.nodeName)this.insertAdjacentHTML("afterend",e.outerHTML);else{var t=this;e.each(function(e,n){t.insertAdjacentHTML("afterend",n.outerHTML)})}})},r.fn.insertAfter=function(e){return this[0].parentNode.className==="hippo-doc-frag-wrapper"&&n.exec(e)!==null?r(this[0]).add(e):this.each(function(){r(e).after(this)})},r.fn.append=function(e){return this.each(function(){if(typeof e=="string")this.insertAdjacentHTML("beforeend",e);else if(e.nodeName)this.insertAdjacentHTML("beforeend",e.outerHTML);else{var t=this;e.each(function(e,n){t.insertAdjacentHTML("beforeend",n.outerHTML)})}})},r.fn.appendTo=function(e){return this.each(function(){r(e).append(this)})},r.fn.prepend=function(e){return this.each(function(){if(typeof e=="string")this.insertAdjacentHTML("afterbegin",e);else if(e.nodeName)this.insertAdjacentHTML("afterbegin",e.outerHTML);else{var t=this;e.each(function(e,n){t.insertAdjacentHTML("afterbegin",n.outerHTML)})}})},r.fn.prependTo=function(e){return this.each(function(){r(e).prepend(this)})},r.fn.wrap=function(e){return this.each(function(){$(this).replaceWith(r(e).append(this))})},r.fn.wrapInner=function(e){return this.each(function(){this.innerHTML=r(e).append(this)[0].outerHTML})},r.fn.html=function(e){return e?this.each(function(){this.innerHTML=e}):this[0].innerHTML},r.fn.outerHtml=function(e){return e?this.each(function(){this.outerHTML=e}):this[0].outerHTML},r.fn.text=function(e){return e?this.each(function(){this.textContent=e}):this[0].textContent.trim()}}).call(this);